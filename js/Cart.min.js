class Cart{constructor(t,a="#cart-content"){this.source=t,this.container=a,this.countGoods=0,this.amount=0,this.cartItems=[],this._init(this.source)}_render(){$(this.container).empty();let t=$("<div/>",{id:"cart-items-wrap"}),a=$("<div/>",{class:"cart-content__total"});a.append('<span>total</span><span class="cart-content__totalPrice"></span>'),t.appendTo($(this.container)),a.appendTo($(this.container)),$(this.container).append('<a class="cart-content__btn" href="checkout.html">checkout</a>'),$(this.container).append('<a class="cart-content__btn" href="shopping-card.html">go to card</a>')}_renderItem(t){let a=$("<div/>",{class:"cart-content-item","data-product":t.id_product}),e=$("<a/>",{href:"product.html"});e.append($(`<img src="${t.image}" alt="${t.product_name}">`)),a.append(e);let i=$("<div/>",{class:"item-caption"});i.append($(`<div class="item-caption__name">${t.product_name}</div>`));let n=$("<div/>",{class:"item-caption__stars"});for(let t=0;t<5;t++)n.append($('<i class="fa fa-star"></i>'));i.append(n);let s=$("<div/>",{class:"item-caption__price"});s.append($(`<span class="quantity">${t.quantity}</span>x <span class="price">$${t.price}</span>`)),i.append(s),a.append(i);let c=$(`<a href="#" class="content-item_delBtn" data-id="${t.id_product}"> <i class="fa fa-times-circle fa-sm" data-id="${t.id_product}"></i><a/>`);a.append(c),c.click(t=>{t.preventDefault(),console.log($(t.target).data("id")),this._remove($(t.target).data("id"))}),$("#cart-items-wrap").append(a)}_renderMain(){if($("#main-cart-wrap").length)for(let t of this.cartItems)this._renderItemMain(t)}_renderItemMain(t){let a=$("<div/>",{class:"table-row","data-product":t.id_product});a.append($(`<div class="item-of-table">\n            <a href="product.html"><img src="${t.image}" alt="${t.product_name}"></a>\n            </div>`));let e=$("<div/>",{class:"item-of-table main-cart__caption"});e.append($(`<h5>${t.product_name}</h5>`)),e.append($("<p><span>Color:</span>Red</p><p><span>Size:</span>   Xll</p>")),a.append(e),a.append($(`<div class="item-of-table main-cart__price">$${t.price}</div>`)),(e=$("<div/>",{class:"item-of-table main-cart__quantity"})).append($(`<input type="number" data-id = "product.id_product" value="${t.quantity}" min="1" max="15" class="item-of-table_quantity">`)),a.append(e),a.append($('<div class="item-of-table"> FREE</div>')),a.append($(`<div class="item-of-table main-cart__totalPrice"> $${t.quantity*t.price}</div>`)),e=$("<div/>",{class:"item-of-table"});let i=$(`<a href="#" class="main-cart__delBtn" data-id="${t.id_product}"> <i class="fa fa-times-circle fa-sm" data-id="${t.id_product}"></i><a/>`);e.append(i),a.append(e),$("#main-cart-wrap").append(a),i.click(t=>{t.preventDefault(),this._remove($(t.target).data("id")),console.log(111)})}_renderSum(t,a){$(".cart-content__totalPrice").text(`$${t} `),$("#subtotal").text(`$${t} `),$("#grandtotal").text(`$${t} `)}_init(t){this._render(),fetch(t).then(t=>t.json()).then(t=>{for(let a of t.contents)this.cartItems.push(a),this._renderItem(a);this._renderMain(),this.countGoods=t.countGoods,this.amount=t.amount,this._renderSum(t.amount,t.countGoods)})}_updateCart(t){let a=$(`div[data-product="${t.id_product}"]`);a.find(".quantity").text(t.quantity),a.find(".item-of-table_quantity").val(t.quantity),a.find(".main-cart__totalPrice").text(`$${t.quantity*t.price}`)}_addProduct(t){0===this.cartItems.length&&this._render();let a=+$(t).data("id"),e=this.cartItems.find(t=>t.id_product===a);if(e)e.quantity++,this.countGoods++,this.amount+=e.price,this._updateCart(e);else{let e={id_product:a,price:+$(t).data("price"),product_name:$(t).data("name"),image:$(t).data("image"),quantity:1};this.cartItems.push(e),this.amount+=e.price,this.countGoods+=e.quantity,this._renderItem(e)}this._renderSum(this.amount,this.countGoods)}_remove(t){let a=this.cartItems.find(a=>a.id_product===t);if(a.quantity>1)a.quantity--,this._updateCart(a);else{let e=$(`div[data-product="${t}"]`);this.cartItems.splice(this.cartItems.indexOf(a),1),e.remove()}this.countGoods--,this.amount-=a.price,0===this.cartItems.length&&$(this.container).html('<span id="no-items">You card is empty &#x1f610; </span>'),this._renderSum(this.amount,this.countGoods)}_clear(){this.cartItems=[],$(this.container).empty(),$(this.container).html('<span id="no-items">You card is empty &#x1f610; </span>'),$("#main-cart-wrap").empty()}}
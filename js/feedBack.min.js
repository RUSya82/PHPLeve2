class FeedBack{constructor(e,t){this.source=e,this.container=$(t),this.feebBackCollection=[],this._init(this.source),this.containerItem=this.container.html()}_init(e){fetch(e).then(e=>e.json()).then(e=>{for(let t of e)this.feebBackCollection.push(t)}).then(()=>this._render()).then(()=>this._checkListeners()).then(()=>{this.container.show()})}_renderItem(e,t){return t=(t=(t=(t=t.replace(/\{feedbackId}/g,e.id)).replace(/\{feedbackName\}/,e.name)).replace(/\{feedbackHeader\}/,e.header)).replace(/\{feedbackText\}/,e.text)}_removeItem(e){e.closest(".feedback-item").remove()}_render(){this.container.empty();for(let e of this.feebBackCollection){let t=$(this._renderItem(e,this.containerItem));0==+e.moderated&&t.addClass("noModer"),this.container.append(t)}}_checkListeners(){$(".toggle-bth").click(e=>{$(e.target).hasClass("fa")?($(e.target).toggleClass("fa-angle-double-down"),$(e.target).toggleClass("fa-angle-double-up")):($(e.target).find(".fa").toggleClass("fa-angle-double-down"),$(e.target).find(".fa").toggleClass("fa-angle-double-up")),$(e.target).closest(".feedback-item").find(".text").slideToggle(500)}),$(".remove").click(e=>{let t=+$(e.target).data("id"),a=this.feebBackCollection.findIndex(e=>+e.id===t);this.feebBackCollection.splice(a,1),this._removeItem($(e.target))}),$(".success").click(e=>{let t=+$(e.target).data("id"),a=this.feebBackCollection.findIndex(e=>+e.id===t);this.feebBackCollection[a].moderated="1",$(e.target).closest(".feedback-item").removeClass("noModer"),$(e.target).remove()}),$("#sbm").click(e=>{e.preventDefault(),this._addItem($("#name").val(),$("#header").val(),$("#content").val()),$("#name").val(""),$("#header").val(""),$("#content").val("")})}_addItem(e,t,a){let l={id:String(this.feebBackCollection.length+1),moderated:"0",name:e,header:t,text:a};this.feebBackCollection.push(l),this._renderNewItem(l)}_renderNewItem(e){let t=$(this._renderItem(e,this.containerItem));0==+e.moderated&&t.addClass("noModer"),this.container.append(t);let a=$(".feedback-item").last().children(".toggle-bth");a.click(e=>{$(e.target).hasClass("fa")?($(e.target).toggleClass("fa-angle-double-down"),$(e.target).toggleClass("fa-angle-double-up")):($(e.target).find(".fa").toggleClass("fa-angle-double-down"),$(e.target).find(".fa").toggleClass("fa-angle-double-up")),$(e.target).closest(".feedback-item").find(".text").slideToggle(500)}),(a=$(".feedback-item").last().children(".remove")).click(e=>{let t=+$(e.target).data("id"),a=this.feebBackCollection.findIndex(e=>+e.id===t);this.feebBackCollection.splice(a,1),this._removeItem($(e.target))}),(a=$(".feedback-item").last().children(".success")).click(e=>{let t=+$(e.target).data("id"),a=this.feebBackCollection.findIndex(e=>+e.id===t);this.feebBackCollection[a].moderated="1",$(e.target).closest(".feedback-item").removeClass("noModer"),$(e.target).remove()})}}